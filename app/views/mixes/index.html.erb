
<div id="mixes-show-detailed-wrapper">
  <div id="mixe-show-detailed-left-column">
    
    <% @mixes.each do |mix| %>
      <%= render 'mix_detailed_block', mix: mix %>
    <% end %>

    <ul class="pager">
      <% if @previous_page_path %>
        <li class="previous"><%= link_to("上一頁", 
                                         next_page_path(next_page_path: @previous_page_path), 
                                         remote: true) %></li>
      <% end %>
      <% if @next_page_path %>
        <li class="next"><%= link_to("下一頁", 
                                     next_page_path(next_page_path: @next_page_path), 
                                     remote: true) %></li>
      <% end %>
    </ul>
  </div>
  <div id="mixe-show-detailed-right-column">mixe-show-detailed-right-column</div>
  
</div>
<script>

$(document).ready(function() {
  
  // TODO: Adding collection
  $(".mix-show-plus-btn").click(function (event) {
    event.preventDefault();
    var mixID = $(this).attr('mix-id');
    $.addCollection(mixID);
  });


  $(".content-exchange-box").off('ajax:beforeSend');
  $(".content-exchange-box").on('ajax:beforeSend', function (status, xhr, settings) {
    xhr.abort();
  });
  $(".pager").off('ajax:beforeSend');
  $(".pager").on('ajax:beforeSend', function (status, xhr, settings) {
    xhr.abort();
  });
  // pagination ajax may send twice requext
  //$(".panel-primary").on('ajax:beforeSend', function (status, xhr, settings) {
  //  xhr.abort();
  //});
});

</script>